<!DOCTYPE html> <html lang="en" dir="ltr" itemtype="http://schema.org/WebPage" itemscope=""> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="HandheldFriendly" content="true"/> <title>NPM packages 101: Creating npm package | Fragaria.cz</title> <meta name="author" content="Fragaria s.r.o."/> <meta name="robots" content="index,follow"/> <meta name="description" content="Going down the path of node package creator - guide to create npm package and publish it to npm repository."> <meta name="keywords" content="software, software development, web apps, vývoj software, webové aplikace, python, javascript, typescript, java, angular, vue, elasticsearch, html, css, npm, package, publish, javascript, typescript"/> <meta property="og:url" content="https://fragaria.cz/blog/2017/06/26/npm-packages-101-creating-npm-package/"/> <meta property="og:type" content="website"/> <meta property="og:title" content="NPM packages 101: Creating npm package | Fragaria.cz"/> <meta property="og:description" content="Going down the path of node package creator - guide to create npm package and publish it to npm repository."/> <meta property="og:image" content="https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg"/> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"> <link rel="manifest" href="/assets/favicons/site.webmanifest"> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#ea272e"> <link rel="shortcut icon" href="/favicon.ico"> <meta name="msapplication-TileColor" content="#ea272e"> <meta name="msapplication-config" content="/assets/favicons/browserconfig.xml"> <meta name="theme-color" content="#ea272e"> <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-9784905-1', 'auto');
    ga('send', 'pageview');
</script> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/AndulkaTextPro.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/AndulkaTextPro-Italic.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/TriviaGroteskN2-Bold.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="/assets/fonts/fragariacz-icons.ttf?3rxsze" as="font" type="font/ttf" crossorigin="anonymous"> <link rel="preload" href="/assets/js/site.js?906be5e74733e0c75a9b8bc048028f1f" as="script"> <link rel="stylesheet" href="/assets/styles.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="alternate" type="application/atom+xml" href="/feed.xml" title="Blog | Fragaria.cz"/> <link rel="self" type="application/atom+xml" href="/feed.xml"/> <link rel="preload" href="https://fonts.googleapis.com/css?family=Source+Code+Pro" as="style"> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"/> </head> <body class="page-container baseline-grid js-baseline-grid js-ie-warn"> <div class="old-ie-warning"> <img alt="Fragaria s.r.o." src="/assets/img/strawberry.svg"> <h1>Fragaria.cz</h1> <p>We are an <b>agile-thinking</b> company. Following the philosophy, we've decided not to support <b>Internet Explorer</b>. It's just not worth the effort. Since you're using it, you might experience various issues with the site.</p> <p>To see our website in it's full glance, we suggest using <a href="https://www.microsoft.com/en-us/windows/microsoft-edge">Microsoft Edge</a>, <a href="https://www.google.com/chrome/">Google Chrome</a>, <a href="https://www.opera.com/download">Opera</a> or <a href="https://www.mozilla.org/en-US/firefox/new/">Mozilla Firefox</a>.</p> <p><strong>Thanks for your understanding</strong>.</p> <span class="button js-ie-warn__dismiss" role="button">Dismiss</span> </div> <nav id="js-sitenav" class="sitenav js-sitenav" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement"> <div class="sitenav__container"> <div class="content-block content-block__cover--mobile"> <div class="sitenav__menu js-sitenav-menu"> <a href="/" class="sitenav__company typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Fragaria</span></a> <a class="sitenav__brand" href="/"> <img alt="Fragaria s.r.o." src="/assets/img/strawberry.svg"> </a> <button class="sitenav__menutoggle hamburger hamburger--collapse js-sitenav-menu__toggle" type="button" aria-label="Menu" aria-controls="js-sitenav" aria-expanded="false"> <span class="hamburger-box"> <span class="hamburger-inner"></span> </span> </button> </div> <ul class="sitenav__linkset"> <li class="sitenav__linkset-item js-sitenav__link"><a href="/#projects" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Projects</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/how-we-work/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">How we work</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/blog/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Blog</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/work-with-us/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Work with us</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/#get-in-touch" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Contact</span></a></li> </ul> </div> </div> </nav> <div class="page-container__inner sitenav-wrapper"> <div class="sitenav-wrapper__push"> <article itemtype="https://schema.org/TechArticle" itemscope class="article" lang="en"> <div class="content-block typeset"> <h1 itemprop="name" class="article__headline">NPM packages 101: Creating npm package</h1> <meta itemprop="headline" content="NPM packages 101: Creating npm package"> <div itemprop="publisher" itemtype="http://schema.org/Organization" class="hidden" itemscope> <div itemprop="logo" itemtype="http://schema.org/ImageObject" itemscope=""> <meta itemprop="url" content="https://fragaria.cz/assets/img/strawberry.svg"> </div> <meta itemprop="name" content="Fragaria s.r.o."> </div> <p class="article__meta"> <meta itemprop="datePublished" content=""/> <span class="article__pubdate">June 26, 2017</span> <span itemprop="author" itemtype="http://schema.org/Person" itemscope="" class="article__author"> by <span itemprop="name">Jakub Podlaha</span> </span> <meta itemprop="publisher"></meta> </p> <div class="article__content-wrap"> <div class="article__content article-typeset js-auto-add-headline-anchors hypenize"> <p>Going down the path of node package creator - guide to create npm package and publish it to npm repository.</p> <figure class="figure content-block__cover--mobile "> <img src="https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2017-06-26-npm-packages-101-creating-npm-package__1.jpg 2240w," class="figure__image js-fix-baseline"/> <figcaption class="figure__caption">Tim Gouw</figcaption> </figure> <p>As I couldn’t find any Javascript package for handling <a href="https://en.wikipedia.org/wiki/National_identification_number#Czech_Republic_and_Slovakia">Czech and Slovak National identification number</a>, aka <em>rodné číslo</em>, I’ve decided to publish my own. As this was my first time going down the path of npm package maintainer, I’d like to share how it feels these days.</p> <h2 id="nvm-to-the-rescue">NVM to the rescue</h2> <p>Before diving into the package creation I’d like to recommend <a href="https://github.com/creationix/nvm">nvm</a>, a tool for managing separate node versions/environments on your local computer. I especially like it for storing my global npm packages like <a href="http://yeoman.io/">yeoman</a> or even npm itself under <code class="highlighter-rouge">~/.nvm/...</code> directories and not under <code class="highlighter-rouge">/usr/lib/node_modules</code> which I like to keep simple and su-rights-protected.</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="c"># install nvm</span>
nvm <span class="nb">install </span>node
nvm use node</code></pre></figure> <p>Ok, nvm is installed let’s dive into package creation.</p> <h2 id="creating-package-from-scratch-no-yo">Creating package from scratch? No. Yo!</h2> <p>Shall I use ES5? ES6? ES7? Babel? Coffeescript? Typescript? How to configure them? What version of compiler? Why the heck are we compiling Javascript anyway? Shall I use <code class="highlighter-rouge">import</code> or <code class="highlighter-rouge">require</code>? And what’s this badge <img src="https://img.shields.io/travis/kub1x/rodnecislo.svg" alt="generator-np build status"/>? Automated building? Cool, how do I configure it? And how about test framework? And mocks?! Wait and what license should i choose?!</p> <p>You got it. Creating a npm package is a process of overwhelming amount of decisions. Decisions someone else must’ve already undertaken. And luckily some of them shared their effort in a form of <a href="http://yeoman.io/generators/">yeoman generator</a>.</p> <h2 id="so-lets-generate-the-package">So let’s generate the package</h2> <p>At the time of starting my package the <a href="https://github.com/d4rkr00t/generator-np">generator-np</a> seemed promising, though it is a bit out of date today: <img src="https://img.shields.io/github/issues/d4rkr00t/generator-np.svg" alt="generator-np issues"/>. It solved most of the questions above for me. As written in the description of the generator:</p> <blockquote> <p>Generator for npm module with ES6+, <a href="https://github.com/babel/babel">Babel</a>, <a href="https://github.com/sindresorhus/ava">Ava</a>, <a href="https://github.com/eslint/eslint">ESlint</a>, <a href="https://travis-ci.org/">Travis</a>, and npm scripts</p> </blockquote> <p>So we’ll write ES6 javascript, babel compilled, ava tested and use travis for CI. Now let’s have an empty github repo <a href="https://github.com/kub1x/rodnecislo"><code class="highlighter-rouge">kub1x/rodnecislo</code></a> cloned in <code class="highlighter-rouge">rodnecislo</code> directory and start the generator as follows:</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell">git clone git@github.com:kub1x/rodnecislo.git
<span class="nb">cd </span>rodnecislo
nvm use node
npm <span class="nb">install</span> <span class="nt">-g</span> yeoman generator-np
yo np</code></pre></figure> <p>The generator-np still asks some questions, which need to be answered. Following are my answers and the reasoning behind them.</p> <p><strong>What is the URL of your website?</strong><code class="highlighter-rouge">https://kub1x.github.io/rodnecislo/</code> Go to <a href="https://pages.github.com/">github pages</a>, scroll under the video tutorial, click “Project page” and follow the instructions. Your url will have this form: <code class="highlighter-rouge">https://your_user_name.github.io/your_repo_name/</code></p> <p><strong>Do you need .travis.yml?</strong><em>Yes.</em> Got to <a href="https://travis-ci.org/">Travis-ci</a>. Create an account. Enable for your github repository. Get emails whenever you push to master something, that breaks your build, lint or tests.</p> <p><strong>Do you need setup for coveralls?</strong><em>Yes.</em> You don’t need to do anything (except writing your tests…) to see beautiful visualisation of your test coverage on your <a href="https://coveralls.io/github/kub1x/rodnecislo">coveralls page</a>.</p> <p><strong>Do you need setup for commitizen?</strong><em>Yes.</em> It feels really neat to have standardized format of commit messages. Better for cooperation, readability, confidence, automated tools… simply better. Using commitizen you basically do <code class="highlighter-rouge">git cz</code> and follow a short wizard instead of doing <code class="highlighter-rouge">git commit -m “some messy message”</code>. The resulting message looks like this: <code class="highlighter-rouge">build(travis): Add node version 7 to .travis.yml</code>. See <a href="http://commitizen.github.io/cz-cli/">commitizen page</a> on how the system actually works. It defaults to angular commit standard, that is <a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#-git-commit-guidelines">described here</a>. Tough I find it much more helpful to get the notion from the actual commit messages in the <a href="https://github.com/angular/angular.js/commits/master">angular repo</a>.</p> <p><strong>Do you need automatic github releases?</strong><em>Yes.</em> This gives us a great benefit of <a href="https://github.com/kub1x/rodnecislo/releases">generated releases</a>. The tool for it, <code class="highlighter-rouge">conventional-github-releaser</code>, tells you exactly what to do to, which itself helps so much, that I can’t resist repeating it here (just a little more specific). Going from version <code class="highlighter-rouge">0.0.1</code> to <code class="highlighter-rouge">0.0.2</code>:</p> <ol> <li>Make a change</li> <li><code class="highlighter-rouge">npm run verify</code></li> <li><code class="highlighter-rouge">git cz</code> the change</li> <li>Make sure Travis CI turns green</li> <li>Repeat until enough changes to call it a version ;P</li> <li>Do <code class="highlighter-rouge">npm login</code> with your npmjs.org account. I failed to do this and accidentally published my package as a wrong user ;)</li> <li><code class="highlighter-rouge">npm run major</code> OR <code class="highlighter-rouge">minor</code> OR <code class="highlighter-rouge">patch</code> - does all the following for you: <ul> <li>Run tests, verifications, etc.</li> <li>Bump version in package.json, commit, create git tag and push it</li> <li><code class="highlighter-rouge">npm publish</code> to <a href="https://www.npmjs.com/package/rodnecislo">npmjs repo</a></li> </ul> </li> <li><code class="highlighter-rouge">npm run github-release</code> - creates the nice release report on github mentioned earlier</li> <li>Celebrate… and maintain.</li> </ol> <p><strong>Do you need CLI?</strong><em>No.</em> As I’m writing npm library rather than console tool, I don’t expect it being used from command line. But for the sake of completeness the <code class="highlighter-rouge">cli</code> option of the generator creates <a href="https://github.com/d4rkr00t/generator-np/blob/master/app/templates/src/cli.js">this file</a> in your package’s <code class="highlighter-rouge">src</code> directory and adds <code class="highlighter-rouge">meow</code> to your deps. That’s it.</p> <h2 id="aaaand-were-done-almost">Aaaand we’re done… Almost</h2> <p>After the generation process finishes the whole project is automatically being set up. The template itself takes care of <code class="highlighter-rouge">npm install</code>, running your first build, lint, tests, and checking for outdated dependencies using <a href="https://docs.npmjs.com/cli/outdated">npm outdated</a>. I recommend reading the output of the generation process as there is practically everything you need to know about your newly generated package, especially the npm scripts being called. At the time of writing, some of the packages are outdated downright after the generation due to <a href="https://github.com/d4rkr00t/generator-np/pulls">inactivity of the maintainer</a> (perhaps someone could offer him a hand ;)). To fix this use <a href="https://www.npmjs.com/package/npm-check-updates">npm-check-updates</a> tool:</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell">npm <span class="nb">install</span> <span class="nt">-g</span> npm-check-updates
ncu <span class="nt">-a</span></code></pre></figure> <p>Now this is just the beginning. Even the first version of the module took quite some time on research, programming and writing. I’m kinda wondering how maintaining of it will go, so about it later.</p> <p>Cheers, <code class="highlighter-rouge">npm install rodnecislo</code> and go opensource.</p> </div> </div> </div> <div class="content-block"> <div class="article__misc"> <div class="article__miscitem"> <div class="taglist " itemscope itemtype="http://schema.org/WebPage"> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/npm/" itemprop="relatedLink">npm, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/package/" itemprop="relatedLink">package, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/publish/" itemprop="relatedLink">publish, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/javascript/" itemprop="relatedLink">javascript, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/typescript/" itemprop="relatedLink">typescript</a> </div> </div> <div class="article__miscitem"> <div class="sharebox"> <ul class="sharebox__items"> <li class="sharebox__item sharebox__item--twitter"> <a class="sharebox__item-body" href="https://twitter.com/intent/tweet?text=NPM packages 101: Creating npm package&url=https://fragaria.cz/blog/2017/06/26/npm-packages-101-creating-npm-package/&via=&related=" target="_blank" rel="noopener" title="Share on Twitter"><span>Share on Twitter</span></a> </li> <li class="sharebox__item sharebox__item--facebook"> <a class="sharebox__item-body" href="https://facebook.com/sharer.php?u=https://fragaria.cz/blog/2017/06/26/npm-packages-101-creating-npm-package/" target="_blank" rel="noopener" title="Share on Facebook"><span>Share on Facebook</span></a> </li> </ul> </div> </div> </div> </div> </article> <footer class="content-block"> <div class="footer"> <div class="footer__meta"> <a href="/"> <img alt="Fragaria s.r.o." class="footer__brand" src="/assets/img/strawberry.svg"> </a> <div class="footer__copy"> <div class="footer__copy-line footer__copy-line--emphasized">FRAGARIA &copy; 2021</div> <div class="footer__copy-line">Talk is cheap, show me the code.</div> </div> </div> <div class="footer__social"> <a href="https://www.youtube.com/channel/UCz1zwJ9_6-IVdX6oCvq6T_g" class="icon--youtube footer__social-icon" title="Youtube channel"></a> <a href="https://twitter.com/fragariacz" class="icon--twitter footer__social-icon" title="Twitter profile page"></a> <a href="https://linkedin.com/company/fragaria-ltd" class="icon--linkedin footer__social-icon" title="LinkedIn profile page"></a> <a href="https://github.com/fragaria" class="icon--github footer__social-icon" title="GitHub profile page"></a> <a href="https://stackshare.io/fragaria" class="icon--stackshare footer__social-icon" title="Stackshare profile page"></a> </div> </div> </footer> </div> </div> <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script> <script src="/assets/js/smoothscroll.js"></script> <script src="/assets/js/element-closest.js"></script> <script src="/assets/js/site.js?906be5e74733e0c75a9b8bc048028f1f"></script> <script type="text/javascript" src="/assets/js/register-sw.js"></script> </body> </html>