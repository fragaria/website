<!DOCTYPE html> <html lang="en" dir="ltr" itemtype="http://schema.org/WebPage" itemscope=""> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="HandheldFriendly" content="true"/> <title>Building a simple company website the Hard Way: Vertical rhythm | Fragaria.cz</title> <meta name="author" content="Fragaria s.r.o."/> <meta name="robots" content="index,follow"/> <meta name="description" content="Websites with good vertical rhythm are more aesthetically pleasing and generally feel more consistent. While understanding vertical rhythm rules is simple, maintaing it on bigger websites becomes challenging. But challenges are fun, aren’t they? Read on!"> <meta name="keywords" content="software, software development, web apps, vývoj software, webové aplikace, python, javascript, typescript, java, angular, vue, elasticsearch, html, css, typography, vertical rhythm, baseline, sass, css, fonts"/> <meta property="og:url" content="https://fragaria.cz/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm/"/> <meta property="og:type" content="website"/> <meta property="og:title" content="Building a simple company website the Hard Way: Vertical rhythm | Fragaria.cz"/> <meta property="og:description" content="Websites with good vertical rhythm are more aesthetically pleasing and generally feel more consistent. While understanding vertical rhythm rules is simple, maintaing it on bigger websites becomes challenging. But challenges are fun, aren’t they? Read on!"/> <meta property="og:image" content="https://res.cloudinary.com/fragaria/image/upload/w_640,c_fit,f_jpg,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg"/> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"> <link rel="manifest" href="/assets/favicons/site.webmanifest"> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#ea272e"> <link rel="shortcut icon" href="/favicon.ico"> <meta name="msapplication-TileColor" content="#ea272e"> <meta name="msapplication-config" content="/assets/favicons/browserconfig.xml"> <meta name="theme-color" content="#ea272e"> <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-9784905-1', 'auto');
    ga('send', 'pageview');
</script> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/AndulkaTextPro.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/AndulkaTextPro-Italic.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="https://res.cloudinary.com/fragaria/raw/upload/v1534234755/fragaria.cz/fonts/TriviaGroteskN2-Bold.woff" as="font" type="font/woff" crossorigin> <link rel="preload" href="/assets/fonts/fragariacz-icons.ttf?3rxsze" as="font" type="font/ttf" crossorigin="anonymous"> <link rel="preload" href="/assets/js/site.js?fefed86871033f8f71fee69716995b15" as="script"> <link rel="stylesheet" href="/assets/styles.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="alternate" type="application/atom+xml" href="/feed.xml" title="Blog | Fragaria.cz"/> <link rel="self" type="application/atom+xml" href="/feed.xml"/> <link rel="preload" href="https://fonts.googleapis.com/css?family=Source+Code+Pro" as="style"> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"/> </head> <body class="page-container baseline-grid js-baseline-grid js-ie-warn"> <div class="old-ie-warning"> <img alt="Fragaria s.r.o." src="/assets/img/strawberry.svg"> <h1>Fragaria.cz</h1> <p>We are an <b>agile-thinking</b> company. Following the philosophy, we've decided not to support <b>Internet Explorer</b>. It's just not worth the effort. Since you're using it, you might experience various issues with the site.</p> <p>To see our website in it's full glance, we suggest using <a href="https://www.microsoft.com/en-us/windows/microsoft-edge">Microsoft Edge</a>, <a href="https://www.google.com/chrome/">Google Chrome</a>, <a href="https://www.opera.com/download">Opera</a> or <a href="https://www.mozilla.org/en-US/firefox/new/">Mozilla Firefox</a>.</p> <p><strong>Thanks for your understanding</strong>.</p> <span class="button js-ie-warn__dismiss" role="button">Dismiss</span> </div> <nav id="js-sitenav" class="sitenav js-sitenav" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement"> <div class="sitenav__container"> <div class="content-block content-block__cover--mobile"> <div class="sitenav__menu js-sitenav-menu"> <a href="/" class="sitenav__company typeset__anchor--nounderline" itemprop="url"><span itemprop="name">Fragaria</span></a> <a class="sitenav__brand" href="/"> <img alt="Fragaria s.r.o." src="/assets/img/strawberry.svg"> </a> <button class="sitenav__menutoggle hamburger hamburger--collapse js-sitenav-menu__toggle" type="button" aria-label="Menu" aria-controls="js-sitenav" aria-expanded="false"> <span class="hamburger-box"> <span class="hamburger-inner"></span> </span> </button> </div> <ul class="sitenav__linkset"> <li class="sitenav__linkset-item js-sitenav__link"><a href="/#projects" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Projects</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/how-we-work/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">How we work</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/blog/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Blog</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/work-with-us/" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Work with us</span></a></li> <li class="sitenav__linkset-item js-sitenav__link"><a href="/#get-in-touch" class="sitenav__link typeset__anchor--nounderline js-sitenav-menu__anchor" itemprop="url"><span itemprop="name">Contact</span></a></li> </ul> </div> </div> </nav> <div class="page-container__inner sitenav-wrapper"> <div class="sitenav-wrapper__push"> <article itemtype="https://schema.org/TechArticle" itemscope class="article" lang="en"> <div class="content-block typeset"> <h1 itemprop="name" class="article__headline">Building a simple company website the Hard Way: Vertical rhythm</h1> <meta itemprop="headline" content="Building a simple company website the Hard Way: Vertical rhythm"> <div itemprop="publisher" itemtype="http://schema.org/Organization" class="hidden" itemscope> <div itemprop="logo" itemtype="http://schema.org/ImageObject" itemscope=""> <meta itemprop="url" content="https://fragaria.cz/assets/img/strawberry.svg"> </div> <meta itemprop="name" content="Fragaria s.r.o."> </div> <p class="article__meta"> <meta itemprop="datePublished" content=""/> <span class="article__pubdate">November 12, 2018</span> <span itemprop="author" itemtype="http://schema.org/Person" itemscope="" class="article__author"> by <span itemprop="name">Filip Vařecha</span> </span> <meta itemprop="publisher"></meta> </p> <div class="article__content-wrap"> <div class="article__content article-typeset js-auto-add-headline-anchors hypenize"> <p>Websites with good vertical rhythm are more aesthetically pleasing and generally feel more consistent. While understanding vertical rhythm rules is simple, maintaing it on bigger websites becomes challenging. But challenges are fun, aren’t they? Read on!</p> <figure class="figure content-block__cover--mobile figure--wide"> <img src="https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__6_msthpg 2240w," class="figure__image js-fix-baseline"/> </figure> <section class="box"> <p>This article is a part of the <i>Building a simple company website the Hard Way</i> series.</p> <ol> <li><a href="/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro/">Typography introduction</a></li> <li>Vertical rhythm</li> <li><a href="/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers/">Service workers</a></li> </ol> </section> <h2 id="vertical-rhythm">Vertical rhythm?</h2> <p>Let’s start with a little bit of theory first. What exactly is <em>vertical rhythm</em>? Simply said, it describes combination of two properties of written text:</p> <ul> <li>a line height</li> <li>element spacings (think margins and paddings)</li> </ul> <p>By mixing up these properties you can either end up with a page that looks chaotic or—when you’re careful—with website that feels natural and pleasing. To get a grasp of the principle, consider these two designs:</p> <figure class="figure content-block__cover--mobile figure--wide"> <img src="https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__1_yjlap0 2240w," class="figure__image js-fix-baseline"/> <figcaption class="figure__caption">The Good, the Bad and the Ugly.</figcaption> </figure> <p>Even without the baseline grid attached you would probably say that the one on the left just feels right: it’s easier to read, more balanced and it generally looks more professional. While the one on the right feels rather awkward. Good rhythm inherently brings this feel of natural flow and—similarly to how music rhythm works—improves readability and the looks of the text. Even if you are not a musician, you would probably notice when the rhythm is erratic. The same applies to written text. This principle relates to how our brains work, the key word here is <a href="https://en.wikipedia.org/wiki/Pattern_recognition_(psychology)">pattern recognition</a>.</p> <figure class="figure content-block__cover--mobile "> <img src="https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__3_ex0yyd 2240w," class="figure__image js-fix-baseline"/> <figcaption class="figure__caption">Vertical rhythm is somewhat similar to rhythm in music.</figcaption> </figure> <p>When there is a pattern (<em>~rhythm</em>), the brain has less work to decode the message. When the pattern lacks, text is more difficult (and exhausing) to read. And from the <a href="/blog/2018/09/03/building-a-simple-company-website-the-hard-way-typography-intro/">previous series part</a> we know this is <em>dangerous</em>.</p> <p>Good. Now we know rhythm is imporant. The big question is: <em>how do we maintain it</em>? Surprisingly, there are only two basic rules: <em>multiples of line height</em> and <em>consistency</em>.</p> <h3 id="multiples-of-line-height">Multiples of line height</h3> <p>The core principle behind good vertical rhythm is quite simple: choose appropriate line height and use it as the grid unit. Keep all the spacings between elements on the page as <em>multiples of it</em>.</p> <p>A common practice is to <em>set the line height to 120–150% of the font size</em>. This means it all starts with the font size selection. Many people choose <em>16px as base</em>, because browsers use this as the default value, but you are free to choose whatever you like. We chose 18px for this site. Once you’ve decided about the base font size, decide about the line height. Most of the time, 150% of font size works well and we did the same on this site. Line height is set to 27px (18px × 1.5).</p> <p>Then, when designing the site, keep in mind this simple rule:</p> <blockquote> <p>Element spacing shall be kept as multiples of your line height.</p> </blockquote> <p>For example, if your line height is 24px, you would set your spacings to 48px (2 × 24), 72px (3 × 24), 96px (4 × 24) and so on. You could also use 12px as it’s 0.5 × 24. All the multiples are OK as long as you don’t create dozens of combinations and keep things simple and <em>consistent</em>.</p> <h3 id="consistency">Consistency</h3> <p>Consistency is important beacuse it simplifies orientation and greatly contributes to a natural rhythmic feel of the text. Having the spacings properly sized but inconsistent would not make the reading any simpler for the reader. Taking inspiration from the music again, most songs have verses that repeat throughout the song in consistent matter.</p> <p>Keeping things consistent means estabilishing some rules upfront. This is up to you, there are no strict rules. A good way to do it is to think <em>semantically</em> about the elements. Allow bigger space when the reader should realize context changed. Use smaller space when just dividing paragraphs. Let the text speak for itself.</p> <h2 id="challenges-on-the-horizon">Challenges on the horizon</h2> <p>As you can probably imagine, the math can quicky get tedious when your website grows. I definitely recommend using a CSS preprocessor such as <a href="https://sass-lang.com/">SASS</a> and defining your grid size globally. This then allows you to write the grid unit either as a <em>variable</em>:</p> <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$base-font-size</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span> <span class="cm">/* ~1rem */</span>
<span class="nv">$grid-unit</span><span class="p">:</span> <span class="nv">$base-font-size</span> <span class="o">*</span> <span class="m">1</span><span class="mi">.5</span><span class="p">;</span> <span class="cm">/* ~1.5rem */</span>

<span class="cm">/* a rule */</span>
<span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">2</span> <span class="o">*</span> <span class="nv">$grid-unit</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>or as a <em>function</em>:</p> <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$base-font-size</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span>

<span class="k">@function</span> <span class="nf">gu</span><span class="p">(</span><span class="nv">$multiplier</span><span class="o">:</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">@return</span> <span class="nv">$base-font-size</span> <span class="o">*</span> <span class="nv">$multiplier</span> <span class="o">*</span> <span class="m">1</span><span class="mi">.5</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* a rule */</span>
<span class="nt">h1</span> <span class="p">{</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="nf">gu</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="the-baseline-problem">The baseline problem</h3> <p>A <em>baseline</em> is the invisible line on which most letters sit. The following figure demonstrates it quite well:</p> <figure class="figure content-block__cover--mobile figure--wide"> <img src="https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-09-03-building-a-simple-company-website-the-hard-way-typography__4_jal5ik 2240w," class="figure__image js-fix-baseline"/> <figcaption class="figure__caption">Baseline, line-height, font-size and cap height explained, author: <a href="https://medium.com/@razvanonofrei/aligning-type-to-baseline-the-right-way-using-sass-e258fce47a9b">Razvan Onofrei</a></figcaption> </figure> <p>The space between individual baselines then forms the baseline grid and we know this distance is our grid unit, the size of our line height. Go on and toggle the baseline grid on this website by clicking <a href="#" onclick="window.toggleGrid(); return false;">here</a>. See how all the lines sit nicely on it?</p> <p>When working on you vertical rhythm rules, you will quickly find out that achieving the looks of the introductory image (where each text line is nicely put on the baseline) is not as simple as merely expressing your spacings as multiples of line height.</p> <p>The reason for that is that web browsers <em>in fact do not recognize the concept of baseline</em>. Instead, text is put approximately in the middle of the line height (see the image above again for the reference).</p> <p>This gets problematic when you want to use your baseline for element arrangment. Often, you want to arrange your boxes to match the baseline. This is especially true for multi–column content.</p> <p>So, we need to deal with this somehow. For long, people thought baseline alignment was not possible in CSS. It turns out that—with some SASS dark magic—it’s doable. In order to acheive the desired effect we need to <em>shift every text</em> downwards by a specific amount it needs to fit nicely on the baseline. Your initial thought might be:</p> <blockquote> <p>Subtract font-size from line-height, divide that by two and shift the text down by that difference.</p> </blockquote> <p>Kinda, but not quite. It turns out that what you really need to deal with is not the <em>font-size</em>, but the <em>cap height</em> of each font. Unfortunately, it’s not straightforward to get the cap height value. If you’re lucky enough, you can google it. If not, you will need to either measure it or try and guess until you see it fits.</p> <p>Assuming you have <code class="highlighter-rouge">$line-height</code> and <code class="highlighter-rouge">$font-size</code> in pixels and <code class="highlighter-rouge">$cap-height</code> as ratio of font size (e.g. 0.79 means 79% of the font size is the actual cap height), following formula can be used:</p> <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$shift</span><span class="p">:</span> <span class="p">(</span><span class="nv">$line-height</span> <span class="nf">-</span> <span class="p">(</span><span class="nv">$font-size</span> <span class="o">*</span> <span class="nv">$cap-height</span><span class="p">))</span> <span class="o">/</span> <span class="m">2</span><span class="p">;</span>
</code></pre></div></div> <p>Make sure to use the above image for the reference on the formula.</p> <p>Once we have the shift, we need to move our text downwards on the baseline. We can do that easily by adding <code class="highlighter-rouge">padding-top</code>. Unfortunately, this has a side-effect: it pushes the elements below the one in question, too. In order to compensate, we need to set the same value multiplied by –1 as our <code class="highlighter-rouge">margin-bottom</code>.</p> <p>If you’re interested in details of the algorithm, please look at the <a href="https://medium.com/@razvanonofrei/aligning-type-to-baseline-the-right-way-using-sass-e258fce47a9b">blog post</a> from the original inventor of the technique, Razvan Onofrei.</p> <p>In order to use this globally, we’ll need some help with the math. This is where SASS enters the game. Let’s create some mixins for it. Take a look at the following example (a stripped down version of one of our mixins):</p> <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Base font size, equals to 1rem.</span>
<span class="nv">$rootsize</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span>
<span class="c1">// One grid unit.</span>
<span class="nv">$grid-unit</span><span class="p">:</span> <span class="m">1</span><span class="mi">.5rem</span><span class="p">;</span> <span class="c1">// ~ 24px</span>
<span class="c1">// Information about the font.</span>
<span class="nv">$font</span><span class="p">:</span> <span class="p">(</span>
    <span class="n">cap-height</span><span class="o">:</span> <span class="m">0</span><span class="mi">.75</span><span class="o">,</span>
    <span class="n">font-family</span><span class="o">:</span> <span class="s2">"'Andulka Text Pro', Georgia, Palatino, serif"</span>
<span class="p">);</span>

<span class="k">@function</span> <span class="nf">gu</span><span class="p">(</span><span class="nv">$multiplier</span><span class="o">:</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">@return</span> <span class="nv">$grid-unit</span> <span class="o">*</span> <span class="nv">$multiplier</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Assumes $size and $lineheight are passed in pixels.</span>
<span class="k">@mixin</span> <span class="nf">baseline</span><span class="p">(</span><span class="nv">$size</span><span class="o">,</span> <span class="nv">$lineheight</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$size-rems</span><span class="p">:</span> <span class="nf">strip-unit</span><span class="p">(</span><span class="nv">$size</span> <span class="o">/</span> <span class="nv">$rootsize</span><span class="p">);</span>
    <span class="nv">$capheight-rems</span><span class="p">:</span> <span class="nv">$size-rems</span> <span class="o">*</span> <span class="nf">map-get</span><span class="p">(</span><span class="nv">$font</span><span class="o">,</span> <span class="n">cap-height</span><span class="p">);</span>
    <span class="nv">$lh-rems</span><span class="p">:</span> <span class="nf">strip-unit</span><span class="p">(</span><span class="nv">$lineheight</span> <span class="o">/</span> <span class="nv">$rootsize</span><span class="p">);</span>
    <span class="nv">$shift</span><span class="p">:</span> <span class="p">(</span><span class="nv">$lh-rems</span> <span class="o">-</span> <span class="nv">$capheight-rems</span><span class="p">)</span> <span class="o">/</span> <span class="m">2</span><span class="p">;</span>

    <span class="nl">font-family</span><span class="p">:</span> <span class="si">#{</span><span class="nf">map-get</span><span class="p">(</span><span class="nv">$font</span><span class="o">,</span> <span class="n">font-family</span><span class="p">)</span><span class="si">}</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="si">#{</span><span class="nv">$size-rems</span><span class="si">}</span><span class="n">rem</span><span class="p">;</span>
    <span class="nl">padding-top</span><span class="p">:</span> <span class="si">#{</span><span class="nv">$shift</span><span class="si">}</span><span class="n">rem</span><span class="p">;</span>
    <span class="nl">margin-bottom</span><span class="p">:</span> <span class="si">#{</span><span class="nv">$shift</span> <span class="o">*</span> <span class="m">-1</span><span class="si">}</span><span class="n">rem</span><span class="p">;</span>
    <span class="nl">line-height</span><span class="p">:</span> <span class="si">#{</span><span class="nv">$lh-rems</span><span class="si">}</span><span class="n">rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>There are frameworks, too. You can use <a href="https://sassline.com/">sassline</a> from the Razvan Onofrei (original author of the idea) or <a href="https://jamonserrano.github.io/plumber-sass/">plumber</a> that implements this as a nice SASS library.</p> <p>We originally tried Sassline but quickly realized it’s too restrictive and we didn’t really like all the rules it had introduced. So we decided to write our bunch of mixins to get the job done.</p> <h3 id="the-restrictive-line-height-problem">The restrictive line-height problem</h3> <p>This is best demonstrated by an example:</p> <figure class="figure content-block__cover--mobile figure--wide"> <img src="https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto,dpr_2.0/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5" srcset="https://res.cloudinary.com/fragaria/image/upload/w_480,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 480w, https://res.cloudinary.com/fragaria/image/upload/w_640,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 640w, https://res.cloudinary.com/fragaria/image/upload/w_1290,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 1290w, https://res.cloudinary.com/fragaria/image/upload/w_1920,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 1920w, https://res.cloudinary.com/fragaria/image/upload/w_1120,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 1120w, https://res.cloudinary.com/fragaria/image/upload/w_2240,c_limit,f_auto,q_auto/fragaria.cz/posts/2018-11-12-building-a-simple-company-website-the-hard-way-vertical-rythm__2_hri4a5 2240w," class="figure__image js-fix-baseline"/> <figcaption class="figure__caption">Line-height in direct multiples of grid unit is too restrictive sometimes. In this case on headings.</figcaption> </figure> <p>As you can see on the image, headings on these two examples have different line height. The example on the left—albeit breaking the baseline grid—looks better (and reads better, too!). Well, I’ve not been totally honest with you:</p> <blockquote> <p>Breaking the grid is OK and generally recommended if the readability should suffer otherwise.</p> </blockquote> <p>This rule has a sibling:</p> <blockquote> <p>When you break the baseline grid, make sure to join it again as soon as possible.</p> </blockquote> <p>Example image shows this well. The grid pace is restored once the heading has been dealt with.</p> <p>Even though rules are simple, implmentation is not. The reason for that is that the margin compensation depends on <em>how many lines the heading spans</em>. Looking at the picture it’s obvious that the margin compensation will be different if the heading takes one line, two lines and so on. When we’re off the grid, we’re simply off.</p> <p>Therefore, some static SASS code won’t suffice. We’ll have to use something with more dynamic nature: JavaScript. We ought to calculate the margin compensation based on the actual height of the block element. Ultimately, we need to round the total element height to <em>nearest grid unit</em>.</p> <p>See the example code:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// How many rem units is our line-height.</span>
<span class="kd">const</span> <span class="nx">guRems</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span>
<span class="c1">// How many pixels is 1rem.</span>
<span class="kd">const</span> <span class="nx">remSize</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">).</span><span class="nx">fontSize</span><span class="p">);</span>
<span class="c1">// Size of 1 grid unit in pixels.</span>
<span class="kd">const</span> <span class="nx">gridUnitSize</span> <span class="o">=</span> <span class="nx">remSize</span> <span class="o">*</span> <span class="nx">guRems</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">fixBaseline</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">elemStyle</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="o">||</span> <span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
    <span class="c1">// Actual element height *without* the margin.</span>
    <span class="kd">const</span> <span class="nx">elemBoundingHeight</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">height</span><span class="p">;</span>
    <span class="c1">// Current margin of the element in px.</span>
    <span class="kd">const</span> <span class="nx">elemBottomMargin</span> <span class="o">=</span> <span class="nx">elemStyle</span><span class="p">.</span><span class="nx">marginBottom</span> <span class="p">?</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">elemStyle</span><span class="p">.</span><span class="nx">marginBottom</span><span class="p">)</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="c1">// Total height of the element in px.</span>
    <span class="kd">const</span> <span class="nx">elemHeight</span> <span class="o">=</span> <span class="nx">elemBoundingHeight</span> <span class="o">+</span> <span class="nx">elemBottomMargin</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">elemHeightInGu</span> <span class="o">=</span> <span class="nx">elemHeight</span> <span class="o">/</span> <span class="nx">gridUnitSize</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">marginBottomInGu</span> <span class="o">=</span> <span class="nx">elemBottomMargin</span> <span class="o">/</span> <span class="nx">gridUnitSize</span><span class="p">;</span>

    <span class="c1">// Height difference to nearest grid unit.</span>
    <span class="kd">const</span> <span class="nx">heightDecimalPartInGu</span> <span class="o">=</span> <span class="nx">elemHeightInGu</span> <span class="o">%</span> <span class="mi">1</span><span class="p">;</span>
    <span class="c1">// Compensated margin.</span>
    <span class="kd">const</span> <span class="nx">newMarginInGu</span> <span class="o">=</span> <span class="nx">heightDecimalPartInGu</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="p">?</span>
        <span class="mi">1</span> <span class="o">-</span> <span class="nx">heightDecimalPartInGu</span> <span class="o">+</span> <span class="nx">marginBottomInGu</span> <span class="p">:</span>
        <span class="nx">marginBottomInGu</span> <span class="o">-</span> <span class="nx">heightDecimalPartInGu</span><span class="p">;</span>

    <span class="c1">// Set the new margin (keep rems).</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginBottom</span> <span class="o">=</span> <span class="p">(</span><span class="nx">newMarginInGu</span> <span class="o">*</span> <span class="nx">guRems</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">rem</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>It’s quite straightforward. When dealing with the difference to the nearest grid unit, we either round up or down depending on what is closer. You might end up favoring one or the other. This can be easily adjusted by changing the <code class="highlighter-rouge">0.5</code> to something else (in 0–1 range).</p> <p>Applying this function to our elements (ones that are set to have line height other than integer multiple of grid unit) then turns out to be easy:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">h1, h2, h3, .something-else-that-needs-fixing</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">forEachNode</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nodelist</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">nodelist</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">nodelist</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">forEachNode</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">query</span><span class="p">),</span> <span class="nx">fixBaseline</span><span class="p">);</span>
</code></pre></div></div> <h2 id="conclusion">Conclusion</h2> <p>We’ve covered some ideas on vertical rhythm. As we’ve found out, browser rendering engines unfortunately lack support for proper typography. We’ve described few tips on how to work around it ourselves. Let’s hope the rendering engines will improve at some point in future. Until then, we have two options:</p> <p>a) Ignore the baseline troubles and focus just on the basics<br/> b) Put significant effort to make your website stand out</p> <p>Since you’ve read all the way down to conclusion, I bet you might like the option two a bit more.</p> <p>And in case you enjoyed the article, stay tuned for the next part of <em>Building a simple company website the Hard Way</em> series. We’ll shed some light on <a href="/blog/2019/04/08/building-a-simple-company-website-the-hard-way-service-workers/">Service workers</a>.</p> </div> </div> </div> <div class="content-block"> <div class="article__misc"> <div class="article__miscitem"> <div class="taglist " itemscope itemtype="http://schema.org/WebPage"> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/typography/" itemprop="relatedLink">typography, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/vertical-rhythm/" itemprop="relatedLink">vertical rhythm, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/baseline/" itemprop="relatedLink">baseline, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/sass/" itemprop="relatedLink">sass, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/css/" itemprop="relatedLink">css, </a> <a class="taglist__tag anchor anchor--emphasized" href="/blog/archive/tag/fonts/" itemprop="relatedLink">fonts</a> </div> </div> <div class="article__miscitem"> <div class="sharebox"> <ul class="sharebox__items"> <li class="sharebox__item sharebox__item--twitter"> <a class="sharebox__item-body" href="https://twitter.com/intent/tweet?text=Building a simple company website the Hard Way: Vertical rhythm&url=https://fragaria.cz/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm/&via=&related=" target="_blank" rel="noopener" title="Share on Twitter"><span>Share on Twitter</span></a> </li> <li class="sharebox__item sharebox__item--facebook"> <a class="sharebox__item-body" href="https://facebook.com/sharer.php?u=https://fragaria.cz/blog/2018/11/12/building-a-simple-company-website-the-hard-way-vertical-rhythm/" target="_blank" rel="noopener" title="Share on Facebook"><span>Share on Facebook</span></a> </li> </ul> </div> </div> </div> </div> </article> <footer class="content-block"> <div class="footer"> <div class="footer__meta"> <a href="/"> <img alt="Fragaria s.r.o." class="footer__brand" src="/assets/img/strawberry.svg"> </a> <div class="footer__copy"> <div class="footer__copy-line footer__copy-line--emphasized">FRAGARIA &copy; 2023</div> <div class="footer__copy-line">Talk is cheap, show me the code.</div> </div> </div> <div class="footer__social"> <a href="https://www.youtube.com/channel/UCz1zwJ9_6-IVdX6oCvq6T_g" class="icon--youtube footer__social-icon" title="Youtube channel"></a> <a href="https://twitter.com/fragariacz" class="icon--twitter footer__social-icon" title="Twitter profile page"></a> <a href="https://linkedin.com/company/fragaria-ltd" class="icon--linkedin footer__social-icon" title="LinkedIn profile page"></a> <a href="https://github.com/fragaria" class="icon--github footer__social-icon" title="GitHub profile page"></a> <a href="https://stackshare.io/fragaria" class="icon--stackshare footer__social-icon" title="Stackshare profile page"></a> </div> </div> </footer> </div> </div> <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script> <script src="/assets/js/smoothscroll.js"></script> <script src="/assets/js/element-closest.js"></script> <script src="/assets/js/site.js?fefed86871033f8f71fee69716995b15"></script> <script type="text/javascript" src="/assets/js/register-sw.js"></script> </body> </html>